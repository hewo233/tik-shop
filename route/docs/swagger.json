{
    "schemes": [
        "http"
    ],
    "swagger": "2.0",
    "info": {
        "description": "TikShop 的 API 服务，用于处理相关业务逻辑。",
        "title": "TikShop API",
        "contact": {
            "name": "TikShop 开发团队",
            "url": "https://github.com/hewo/tik-shop"
        },
        "license": {
            "name": "Apache 2.0",
            "url": "http://www.apache.org/licenses/LICENSE-2.0.html"
        },
        "version": "1.0"
    },
    "host": "localhost:8888",
    "basePath": "/",
    "paths": {
        "/admin/{user_id}": {
            "get": {
                "description": "根据用户 ID 获取管理员的详细信息",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "管理员管理"
                ],
                "summary": "获取管理员信息",
                "parameters": [
                    {
                        "type": "integer",
                        "description": "用户ID",
                        "name": "user_id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "Bearer token",
                        "name": "Authorization",
                        "in": "header",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Get Admin info successfully",
                        "schema": {
                            "$ref": "#/definitions/user.GetAdminInfoByIDResponse"
                        }
                    },
                    "400": {
                        "description": "Invalid request",
                        "schema": {
                            "$ref": "#/definitions/user.GetAdminInfoByIDResponse"
                        }
                    }
                }
            },
            "patch": {
                "description": "根据用户 ID 更新管理员的详细信息(等级)",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "管理员管理"
                ],
                "summary": "更新管理员信息",
                "parameters": [
                    {
                        "type": "integer",
                        "description": "用户ID",
                        "name": "user_id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "description": "更新管理员请求参数",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/user.UpdateAdminInfoByIDRequest"
                        }
                    },
                    {
                        "type": "string",
                        "description": "Bearer token",
                        "name": "Authorization",
                        "in": "header",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Admin information updated successfully",
                        "schema": {
                            "$ref": "#/definitions/user.UpdateAdminInfoByIDResponse"
                        }
                    },
                    "400": {
                        "description": "Invalid request",
                        "schema": {
                            "$ref": "#/definitions/user.UpdateAdminInfoByIDResponse"
                        }
                    }
                }
            }
        },
        "/auth/login": {
            "post": {
                "description": "通过邮箱和密码进行用户登录,返回 JWT token",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "用户认证"
                ],
                "summary": "用户登录",
                "parameters": [
                    {
                        "description": "登录请求参数",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/user.LoginRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Login successful",
                        "schema": {
                            "$ref": "#/definitions/user.LoginResponse"
                        }
                    },
                    "400": {
                        "description": "Invalid request or login failed",
                        "schema": {
                            "$ref": "#/definitions/user.LoginResponse"
                        }
                    }
                }
            }
        },
        "/auth/register": {
            "post": {
                "description": "注册新用户,支持 customer、merchant、admin 三种角色",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "用户认证"
                ],
                "summary": "用户注册",
                "parameters": [
                    {
                        "description": "注册请求参数",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/user.RegisterRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "User registered successfully",
                        "schema": {
                            "$ref": "#/definitions/user.RegisterResponse"
                        }
                    },
                    "400": {
                        "description": "Invalid request or validation failed",
                        "schema": {
                            "$ref": "#/definitions/user.RegisterResponse"
                        }
                    }
                }
            }
        },
        "/cart": {
            "get": {
                "description": "获取当前用户的购物车信息，按商家分组返回",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "购物车"
                ],
                "summary": "获取购物车",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Bearer token",
                        "name": "Authorization",
                        "in": "header",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Cart retrieved successfully",
                        "schema": {
                            "$ref": "#/definitions/cart.GetCartResponse"
                        }
                    },
                    "400": {
                        "description": "Invalid request or validation failed",
                        "schema": {
                            "$ref": "#/definitions/cart.GetCartResponse"
                        }
                    }
                }
            },
            "post": {
                "description": "将指定数量的商品添加到购物车",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "购物车"
                ],
                "summary": "添加商品到购物车",
                "parameters": [
                    {
                        "description": "添加购物车请求参数",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/cart.AddToCartRequest"
                        }
                    },
                    {
                        "type": "string",
                        "description": "Bearer token",
                        "name": "Authorization",
                        "in": "header",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Item added successfully",
                        "schema": {
                            "$ref": "#/definitions/cart.AddToCartResponse"
                        }
                    },
                    "400": {
                        "description": "Invalid request or validation failed",
                        "schema": {
                            "$ref": "#/definitions/cart.AddToCartResponse"
                        }
                    }
                }
            },
            "delete": {
                "description": "删除购物车中所有商品",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "购物车"
                ],
                "summary": "清空购物车",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Bearer token",
                        "name": "Authorization",
                        "in": "header",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Cart cleared successfully",
                        "schema": {
                            "$ref": "#/definitions/cart.ClearCartResponse"
                        }
                    },
                    "400": {
                        "description": "Invalid request or validation failed",
                        "schema": {
                            "$ref": "#/definitions/cart.ClearCartResponse"
                        }
                    }
                }
            }
        },
        "/cart/items": {
            "delete": {
                "description": "根据ID列表批量删除购物车中的商品",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "购物车"
                ],
                "summary": "批量删除购物车项",
                "parameters": [
                    {
                        "description": "删除请求参数",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/cart.RemoveItemsRequest"
                        }
                    },
                    {
                        "type": "string",
                        "description": "Bearer token",
                        "name": "Authorization",
                        "in": "header",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Items removed successfully",
                        "schema": {
                            "$ref": "#/definitions/cart.RemoveItemsResponse"
                        }
                    },
                    "400": {
                        "description": "Invalid request or validation failed",
                        "schema": {
                            "$ref": "#/definitions/cart.RemoveItemsResponse"
                        }
                    }
                }
            }
        },
        "/cart/select": {
            "put": {
                "description": "批量选中或取消选中购物车商品",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "购物车"
                ],
                "summary": "切换购物车选中状态",
                "parameters": [
                    {
                        "description": "切换选中状态请求参数",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/cart.ToggleSelectRequest"
                        }
                    },
                    {
                        "type": "string",
                        "description": "Bearer token",
                        "name": "Authorization",
                        "in": "header",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Selection toggled successfully",
                        "schema": {
                            "$ref": "#/definitions/cart.ToggleSelectResponse"
                        }
                    },
                    "400": {
                        "description": "Invalid request or validation failed",
                        "schema": {
                            "$ref": "#/definitions/cart.ToggleSelectResponse"
                        }
                    }
                }
            }
        },
        "/cart/{id}": {
            "put": {
                "description": "更新购物车中某项商品的数量，数量为0时表示删除",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "购物车"
                ],
                "summary": "更新购物车商品数量",
                "parameters": [
                    {
                        "type": "integer",
                        "description": "购物车项ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "description": "更新数量请求参数",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/cart.UpdateQuantityRequest"
                        }
                    },
                    {
                        "type": "string",
                        "description": "Bearer token",
                        "name": "Authorization",
                        "in": "header",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Quantity updated successfully",
                        "schema": {
                            "$ref": "#/definitions/cart.UpdateQuantityResponse"
                        }
                    },
                    "400": {
                        "description": "Invalid request or validation failed",
                        "schema": {
                            "$ref": "#/definitions/cart.UpdateQuantityResponse"
                        }
                    }
                }
            }
        },
        "/customer/{user_id}": {
            "get": {
                "description": "根据用户 ID 获取顾客的详细信息",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "顾客管理"
                ],
                "summary": "获取顾客信息",
                "parameters": [
                    {
                        "type": "integer",
                        "description": "用户ID",
                        "name": "user_id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "Bearer token",
                        "name": "Authorization",
                        "in": "header",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Customer information retrieved successfully",
                        "schema": {
                            "$ref": "#/definitions/user.GetCustomerInfoByIDResponse"
                        }
                    },
                    "400": {
                        "description": "Invalid request",
                        "schema": {
                            "$ref": "#/definitions/user.GetCustomerInfoByIDResponse"
                        }
                    }
                }
            },
            "patch": {
                "description": "根据用户 ID 更新顾客的详细信息(地址、电话)",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "顾客管理"
                ],
                "summary": "更新顾客信息",
                "parameters": [
                    {
                        "type": "integer",
                        "description": "用户ID",
                        "name": "user_id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "description": "更新顾客请求参数",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/user.UpdateCustomerInfoByIDRequest"
                        }
                    },
                    {
                        "type": "string",
                        "description": "Bearer token",
                        "name": "Authorization",
                        "in": "header",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Customer information updated successfully",
                        "schema": {
                            "$ref": "#/definitions/user.UpdateCustomerInfoByIDResponse"
                        }
                    },
                    "400": {
                        "description": "Invalid request",
                        "schema": {
                            "$ref": "#/definitions/user.UpdateCustomerInfoByIDResponse"
                        }
                    }
                }
            }
        },
        "/merchant/{user_id}": {
            "get": {
                "description": "根据用户 ID 获取商家的详细信息",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "商家管理"
                ],
                "summary": "获取商家信息",
                "parameters": [
                    {
                        "type": "integer",
                        "description": "用户ID",
                        "name": "user_id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "Bearer token",
                        "name": "Authorization",
                        "in": "header",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Merchant information retrieved successfully",
                        "schema": {
                            "$ref": "#/definitions/user.GetMerchantInfoByIDResponse"
                        }
                    },
                    "400": {
                        "description": "Invalid request",
                        "schema": {
                            "$ref": "#/definitions/user.GetMerchantInfoByIDResponse"
                        }
                    }
                }
            },
            "patch": {
                "description": "根据用户 ID 更新商家的详细信息(地址、店铺名称)",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "商家管理"
                ],
                "summary": "更新商家信息",
                "parameters": [
                    {
                        "type": "integer",
                        "description": "用户ID",
                        "name": "user_id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "description": "更新商家请求参数",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/user.UpdateMerchantInfoByIDRequest"
                        }
                    },
                    {
                        "type": "string",
                        "description": "Bearer token",
                        "name": "Authorization",
                        "in": "header",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Merchant information updated successfully",
                        "schema": {
                            "$ref": "#/definitions/user.UpdateMerchantInfoByIDResponse"
                        }
                    },
                    "400": {
                        "description": "Invalid request",
                        "schema": {
                            "$ref": "#/definitions/user.UpdateMerchantInfoByIDResponse"
                        }
                    }
                }
            }
        },
        "/order": {
            "get": {
                "description": "分页获取用户的订单列表，支持按状态筛选",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "订单管理"
                ],
                "summary": "获取订单列表",
                "parameters": [
                    {
                        "type": "integer",
                        "default": 1,
                        "description": "页码",
                        "name": "page",
                        "in": "query",
                        "required": true
                    },
                    {
                        "type": "integer",
                        "default": 10,
                        "description": "每页大小",
                        "name": "page_size",
                        "in": "query",
                        "required": true
                    },
                    {
                        "type": "integer",
                        "description": "订单状态",
                        "name": "status",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Bearer token",
                        "name": "Authorization",
                        "in": "header",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Orders retrieved successfully",
                        "schema": {
                            "$ref": "#/definitions/order.ListOrdersResponse"
                        }
                    },
                    "400": {
                        "description": "Invalid request",
                        "schema": {
                            "$ref": "#/definitions/order.ListOrdersResponse"
                        }
                    }
                }
            },
            "post": {
                "description": "用户下单，包含商品列表",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "订单管理"
                ],
                "summary": "创建订单",
                "parameters": [
                    {
                        "description": "创建订单请求参数",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/order.CreateOrderRequest"
                        }
                    },
                    {
                        "type": "string",
                        "description": "Bearer token",
                        "name": "Authorization",
                        "in": "header",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Order created successfully",
                        "schema": {
                            "$ref": "#/definitions/order.CreateOrderResponse"
                        }
                    },
                    "400": {
                        "description": "Invalid request",
                        "schema": {
                            "$ref": "#/definitions/order.CreateOrderResponse"
                        }
                    }
                }
            }
        },
        "/order/{id}": {
            "get": {
                "description": "根据订单 ID 获取订单详细信息",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "订单管理"
                ],
                "summary": "获取订单详情",
                "parameters": [
                    {
                        "type": "integer",
                        "description": "订单ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "Bearer token",
                        "name": "Authorization",
                        "in": "header",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Order details retrieved successfully",
                        "schema": {
                            "$ref": "#/definitions/order.GetOrderResponse"
                        }
                    },
                    "400": {
                        "description": "Invalid request or order not found",
                        "schema": {
                            "$ref": "#/definitions/order.GetOrderResponse"
                        }
                    }
                }
            }
        },
        "/order/{id}/cancel": {
            "post": {
                "description": "根据订单 ID 取消订单",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "订单管理"
                ],
                "summary": "取消订单",
                "parameters": [
                    {
                        "type": "integer",
                        "description": "订单ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "Bearer token",
                        "name": "Authorization",
                        "in": "header",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Order canceled successfully",
                        "schema": {
                            "$ref": "#/definitions/order.CancelOrderResponse"
                        }
                    },
                    "400": {
                        "description": "Invalid request",
                        "schema": {
                            "$ref": "#/definitions/order.CancelOrderResponse"
                        }
                    }
                }
            }
        },
        "/order/{id}/mark_paid": {
            "post": {
                "description": "根据订单 ID 将订单状态标记为已支付",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "订单管理"
                ],
                "summary": "标记订单已支付",
                "parameters": [
                    {
                        "type": "integer",
                        "description": "订单ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "Bearer token",
                        "name": "Authorization",
                        "in": "header",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Order marked as paid successfully",
                        "schema": {
                            "$ref": "#/definitions/order.MarkOrderPaidResponse"
                        }
                    },
                    "400": {
                        "description": "Invalid request",
                        "schema": {
                            "$ref": "#/definitions/order.MarkOrderPaidResponse"
                        }
                    }
                }
            }
        },
        "/ping": {
            "get": {
                "description": "用于测试服务器是否正常响应，返回 \"pong\" 消息",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "summary": "测试接口",
                "responses": {
                    "200": {
                        "description": "返回 message: pong 的 JSON 响应",
                        "schema": {
                            "type": "object",
                            "additionalProperties": true
                        }
                    }
                }
            }
        },
        "/product": {
            "post": {
                "description": "创建一个新的商品,包含商品的详细信息",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "商品管理"
                ],
                "summary": "创建商品",
                "parameters": [
                    {
                        "description": "创建商品请求参数",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/product.CreateProductRequest"
                        }
                    },
                    {
                        "type": "string",
                        "description": "Bearer token",
                        "name": "Authorization",
                        "in": "header",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Product created successfully",
                        "schema": {
                            "$ref": "#/definitions/product.CreateProductResponse"
                        }
                    },
                    "400": {
                        "description": "Invalid request or validation failed",
                        "schema": {
                            "$ref": "#/definitions/product.CreateProductResponse"
                        }
                    }
                }
            }
        },
        "/product/list": {
            "get": {
                "description": "分页获取商品列表,支持按商家和状态筛选",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "商品管理"
                ],
                "summary": "获取商品列表",
                "parameters": [
                    {
                        "minimum": 1,
                        "type": "integer",
                        "description": "商家ID",
                        "name": "merchant_id",
                        "in": "query",
                        "required": true
                    },
                    {
                        "type": "integer",
                        "description": "商品状态(0:全部,1:上架,2:下架)",
                        "name": "status",
                        "in": "query"
                    },
                    {
                        "minimum": 1,
                        "type": "integer",
                        "description": "页码",
                        "name": "page",
                        "in": "query",
                        "required": true
                    },
                    {
                        "maximum": 100,
                        "minimum": 1,
                        "type": "integer",
                        "description": "每页大小",
                        "name": "page_size",
                        "in": "query",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Products retrieved successfully",
                        "schema": {
                            "$ref": "#/definitions/product.ListProductsResponse"
                        }
                    },
                    "400": {
                        "description": "Invalid request",
                        "schema": {
                            "$ref": "#/definitions/product.ListProductsResponse"
                        }
                    }
                }
            }
        },
        "/product/{id}": {
            "get": {
                "description": "根据商品 ID 获取商品的详细信息",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "商品管理"
                ],
                "summary": "获取商品信息",
                "parameters": [
                    {
                        "type": "integer",
                        "description": "商品ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Product details retrieved successfully",
                        "schema": {
                            "$ref": "#/definitions/product.GetProductByIDResponse"
                        }
                    },
                    "400": {
                        "description": "Invalid request or product not found",
                        "schema": {
                            "$ref": "#/definitions/product.GetProductByIDResponse"
                        }
                    }
                }
            },
            "put": {
                "description": "根据商品 ID 更新商品的基本信息(名称、描述、价格、状态)",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "商品管理"
                ],
                "summary": "更新商品信息",
                "parameters": [
                    {
                        "type": "integer",
                        "description": "商品ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "description": "更新商品请求参数",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/product.UpdateProductByIDRequest"
                        }
                    },
                    {
                        "type": "string",
                        "description": "Bearer token",
                        "name": "Authorization",
                        "in": "header",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Product updated successfully",
                        "schema": {
                            "$ref": "#/definitions/product.UpdateProductByIDResponse"
                        }
                    },
                    "400": {
                        "description": "Invalid request or validation failed",
                        "schema": {
                            "$ref": "#/definitions/product.UpdateProductByIDResponse"
                        }
                    }
                }
            },
            "delete": {
                "description": "根据商品 ID 删除商品(软删除)",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "商品管理"
                ],
                "summary": "删除商品",
                "parameters": [
                    {
                        "type": "integer",
                        "description": "商品ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "Bearer token",
                        "name": "Authorization",
                        "in": "header",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Product deleted successfully",
                        "schema": {
                            "$ref": "#/definitions/product.DeleteProductByIDResponse"
                        }
                    },
                    "400": {
                        "description": "Invalid request",
                        "schema": {
                            "$ref": "#/definitions/product.DeleteProductByIDResponse"
                        }
                    }
                }
            }
        },
        "/product/{id}/stock": {
            "put": {
                "description": "根据商品 ID 增加或减少库存,支持乐观锁",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "商品管理"
                ],
                "summary": "修改商品库存",
                "parameters": [
                    {
                        "type": "integer",
                        "description": "商品ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "description": "修改库存请求参数",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/product.ModifyStockByIDRequest"
                        }
                    },
                    {
                        "type": "string",
                        "description": "Bearer token",
                        "name": "Authorization",
                        "in": "header",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Stock modified successfully",
                        "schema": {
                            "$ref": "#/definitions/product.ModifyStockByIDResponse"
                        }
                    },
                    "400": {
                        "description": "Invalid request or insufficient stock",
                        "schema": {
                            "$ref": "#/definitions/product.ModifyStockByIDResponse"
                        }
                    },
                    "409": {
                        "description": "Stock version conflict, please retry",
                        "schema": {
                            "$ref": "#/definitions/product.ModifyStockByIDResponse"
                        }
                    }
                }
            }
        },
        "/user/{user_id}": {
            "get": {
                "description": "根据用户 ID 获取用户基本信息",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "用户管理"
                ],
                "summary": "获取用户信息",
                "parameters": [
                    {
                        "type": "integer",
                        "description": "用户ID",
                        "name": "user_id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "Bearer token",
                        "name": "Authorization",
                        "in": "header",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "User information retrieved successfully",
                        "schema": {
                            "$ref": "#/definitions/user.GetUserInfoByIDResponse"
                        }
                    },
                    "400": {
                        "description": "Invalid request or user ID not found",
                        "schema": {
                            "$ref": "#/definitions/user.GetUserInfoByIDResponse"
                        }
                    }
                }
            },
            "delete": {
                "description": "根据用户 ID 删除用户(软删除)",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "用户管理"
                ],
                "summary": "删除用户",
                "parameters": [
                    {
                        "type": "integer",
                        "description": "用户ID",
                        "name": "user_id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "Bearer token",
                        "name": "Authorization",
                        "in": "header",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "User deleted successfully",
                        "schema": {
                            "$ref": "#/definitions/user.DeleteUserResponse"
                        }
                    },
                    "400": {
                        "description": "Invalid request",
                        "schema": {
                            "$ref": "#/definitions/user.DeleteUserResponse"
                        }
                    }
                }
            },
            "patch": {
                "description": "根据用户 ID 更新用户的基本信息",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "用户管理"
                ],
                "summary": "更新用户信息",
                "parameters": [
                    {
                        "type": "integer",
                        "description": "用户ID",
                        "name": "user_id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "description": "更新用户请求参数",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/user.UpdateUserRequest"
                        }
                    },
                    {
                        "type": "string",
                        "description": "Bearer token",
                        "name": "Authorization",
                        "in": "header",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "User updated successfully",
                        "schema": {
                            "$ref": "#/definitions/user.UpdateUserResponse"
                        }
                    },
                    "400": {
                        "description": "Invalid request or validation failed",
                        "schema": {
                            "$ref": "#/definitions/user.UpdateUserResponse"
                        }
                    }
                }
            }
        },
        "/users": {
            "get": {
                "description": "分页获取用户列表",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "用户管理"
                ],
                "summary": "获取用户列表",
                "parameters": [
                    {
                        "minimum": 1,
                        "type": "integer",
                        "description": "页码",
                        "name": "page_number",
                        "in": "query",
                        "required": true
                    },
                    {
                        "maximum": 100,
                        "minimum": 1,
                        "type": "integer",
                        "description": "每页大小",
                        "name": "page_size",
                        "in": "query",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "Bearer token",
                        "name": "Authorization",
                        "in": "header",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Users retrieved successfully",
                        "schema": {
                            "$ref": "#/definitions/user.ListUsersResponse"
                        }
                    },
                    "400": {
                        "description": "Invalid request",
                        "schema": {
                            "$ref": "#/definitions/user.ListUsersResponse"
                        }
                    }
                }
            }
        }
    },
    "definitions": {
        "base.Admin": {
            "type": "object",
            "properties": {
                "level": {
                    "type": "integer"
                }
            }
        },
        "base.BaseResponse": {
            "type": "object",
            "properties": {
                "code": {
                    "type": "integer"
                },
                "message": {
                    "description": "描述信息",
                    "type": "string"
                }
            }
        },
        "base.CartItem": {
            "type": "object",
            "properties": {
                "id": {
                    "type": "integer"
                },
                "merchant_id": {
                    "type": "integer"
                },
                "product": {
                    "description": "商品详情",
                    "allOf": [
                        {
                            "$ref": "#/definitions/base.Product"
                        }
                    ]
                },
                "product_id": {
                    "type": "integer"
                },
                "quantity": {
                    "type": "integer"
                },
                "selected": {
                    "type": "boolean"
                }
            }
        },
        "base.Customer": {
            "type": "object",
            "properties": {
                "address": {
                    "type": "string"
                },
                "phone": {
                    "type": "string"
                }
            }
        },
        "base.Merchant": {
            "type": "object",
            "properties": {
                "address": {
                    "type": "string"
                },
                "shop_name": {
                    "type": "string"
                }
            }
        },
        "base.MerchantGroup": {
            "type": "object",
            "properties": {
                "items": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/base.CartItem"
                    }
                },
                "merchant_id": {
                    "type": "integer"
                },
                "subtotal": {
                    "type": "integer"
                }
            }
        },
        "base.Product": {
            "type": "object",
            "properties": {
                "description": {
                    "type": "string"
                },
                "id": {
                    "type": "integer"
                },
                "merchant_id": {
                    "type": "integer"
                },
                "name": {
                    "type": "string"
                },
                "price": {
                    "description": "价格(分为单位)",
                    "type": "integer"
                },
                "status": {
                    "description": "0=删除, 1=上架, 2=下架, 3=售罄",
                    "type": "integer"
                },
                "stock": {
                    "type": "integer"
                }
            }
        },
        "base.User": {
            "type": "object",
            "properties": {
                "email": {
                    "description": "邮箱",
                    "type": "string"
                },
                "id": {
                    "description": "用户 ID",
                    "type": "integer"
                },
                "role": {
                    "type": "string"
                },
                "status": {
                    "$ref": "#/definitions/base.UserStatus"
                },
                "username": {
                    "description": "用户名",
                    "type": "string"
                }
            }
        },
        "base.UserStatus": {
            "type": "integer",
            "format": "int64",
            "enum": [
                0,
                1,
                2
            ],
            "x-enum-varnames": [
                "UserStatus_DELETED",
                "UserStatus_ACTIVE",
                "UserStatus_BANNED"
            ]
        },
        "cart.AddToCartRequest": {
            "type": "object",
            "properties": {
                "product_id": {
                    "type": "integer"
                },
                "quantity": {
                    "type": "integer"
                }
            }
        },
        "cart.AddToCartResponse": {
            "type": "object",
            "properties": {
                "base": {
                    "$ref": "#/definitions/base.BaseResponse"
                },
                "cart_item_id": {
                    "type": "integer"
                }
            }
        },
        "cart.ClearCartResponse": {
            "type": "object",
            "properties": {
                "base": {
                    "$ref": "#/definitions/base.BaseResponse"
                },
                "success": {
                    "type": "boolean"
                }
            }
        },
        "cart.GetCartResponse": {
            "type": "object",
            "properties": {
                "base": {
                    "$ref": "#/definitions/base.BaseResponse"
                },
                "groups": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/base.MerchantGroup"
                    }
                },
                "total_selected": {
                    "type": "integer"
                }
            }
        },
        "cart.RemoveItemsRequest": {
            "type": "object",
            "properties": {
                "cart_item_ids": {
                    "type": "array",
                    "items": {
                        "type": "integer"
                    }
                }
            }
        },
        "cart.RemoveItemsResponse": {
            "type": "object",
            "properties": {
                "base": {
                    "$ref": "#/definitions/base.BaseResponse"
                },
                "success": {
                    "type": "boolean"
                }
            }
        },
        "cart.ToggleSelectRequest": {
            "type": "object",
            "properties": {
                "cart_item_ids": {
                    "type": "array",
                    "items": {
                        "type": "integer"
                    }
                },
                "selected": {
                    "type": "boolean"
                }
            }
        },
        "cart.ToggleSelectResponse": {
            "type": "object",
            "properties": {
                "base": {
                    "$ref": "#/definitions/base.BaseResponse"
                },
                "success": {
                    "type": "boolean"
                }
            }
        },
        "cart.UpdateQuantityRequest": {
            "type": "object",
            "properties": {
                "quantity": {
                    "description": "0=删除",
                    "type": "integer"
                }
            }
        },
        "cart.UpdateQuantityResponse": {
            "type": "object",
            "properties": {
                "base": {
                    "$ref": "#/definitions/base.BaseResponse"
                },
                "success": {
                    "type": "boolean"
                }
            }
        },
        "order.CancelOrderResponse": {
            "type": "object",
            "properties": {
                "base": {
                    "$ref": "#/definitions/base.BaseResponse"
                },
                "success": {
                    "type": "boolean"
                }
            }
        },
        "order.CreateOrderItem": {
            "type": "object",
            "properties": {
                "product_id": {
                    "type": "integer"
                },
                "quantity": {
                    "type": "integer"
                }
            }
        },
        "order.CreateOrderRequest": {
            "type": "object",
            "properties": {
                "items": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/order.CreateOrderItem"
                    }
                }
            }
        },
        "order.CreateOrderResponse": {
            "type": "object",
            "properties": {
                "base": {
                    "$ref": "#/definitions/base.BaseResponse"
                },
                "order_id": {
                    "type": "integer"
                }
            }
        },
        "order.GetOrderResponse": {
            "type": "object",
            "properties": {
                "base": {
                    "$ref": "#/definitions/base.BaseResponse"
                },
                "order": {
                    "$ref": "#/definitions/order.OrderItem"
                }
            }
        },
        "order.ListOrdersResponse": {
            "type": "object",
            "properties": {
                "base": {
                    "$ref": "#/definitions/base.BaseResponse"
                },
                "orders": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/order.OrderItem"
                    }
                },
                "total": {
                    "type": "integer"
                }
            }
        },
        "order.MarkOrderPaidResponse": {
            "type": "object",
            "properties": {
                "base": {
                    "$ref": "#/definitions/base.BaseResponse"
                },
                "success": {
                    "type": "boolean"
                }
            }
        },
        "order.OrderItem": {
            "type": "object",
            "properties": {
                "cost": {
                    "description": "单价(分)",
                    "type": "integer"
                },
                "merchant_id": {
                    "type": "integer"
                },
                "product_id": {
                    "type": "integer"
                },
                "product_name": {
                    "type": "string"
                },
                "quantity": {
                    "type": "integer"
                },
                "total_cost": {
                    "description": "小计(分)",
                    "type": "integer"
                }
            }
        },
        "product.CreateProductRequest": {
            "type": "object",
            "properties": {
                "description": {
                    "type": "string"
                },
                "name": {
                    "type": "string"
                },
                "price": {
                    "type": "integer"
                },
                "stock": {
                    "type": "integer"
                }
            }
        },
        "product.CreateProductResponse": {
            "type": "object",
            "properties": {
                "base": {
                    "$ref": "#/definitions/base.BaseResponse"
                },
                "product_id": {
                    "type": "integer"
                }
            }
        },
        "product.DeleteProductByIDResponse": {
            "type": "object",
            "properties": {
                "base": {
                    "$ref": "#/definitions/base.BaseResponse"
                },
                "success": {
                    "type": "boolean"
                }
            }
        },
        "product.GetProductByIDResponse": {
            "type": "object",
            "properties": {
                "base": {
                    "$ref": "#/definitions/base.BaseResponse"
                },
                "product": {
                    "$ref": "#/definitions/base.Product"
                }
            }
        },
        "product.ListProductsResponse": {
            "type": "object",
            "properties": {
                "base": {
                    "$ref": "#/definitions/base.BaseResponse"
                },
                "products": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/base.Product"
                    }
                },
                "total": {
                    "type": "integer"
                }
            }
        },
        "product.ModifyStockByIDRequest": {
            "type": "object",
            "properties": {
                "current_stock": {
                    "type": "integer"
                },
                "delta": {
                    "type": "integer"
                }
            }
        },
        "product.ModifyStockByIDResponse": {
            "type": "object",
            "properties": {
                "base": {
                    "$ref": "#/definitions/base.BaseResponse"
                },
                "stock": {
                    "type": "integer"
                }
            }
        },
        "product.UpdateProductByIDRequest": {
            "type": "object",
            "properties": {
                "description": {
                    "type": "string"
                },
                "name": {
                    "type": "string"
                },
                "price": {
                    "type": "integer"
                },
                "status": {
                    "type": "integer"
                }
            }
        },
        "product.UpdateProductByIDResponse": {
            "type": "object",
            "properties": {
                "base": {
                    "$ref": "#/definitions/base.BaseResponse"
                },
                "product": {
                    "$ref": "#/definitions/base.Product"
                }
            }
        },
        "user.DeleteUserResponse": {
            "type": "object",
            "properties": {
                "base": {
                    "$ref": "#/definitions/base.BaseResponse"
                },
                "success": {
                    "type": "boolean"
                }
            }
        },
        "user.GetAdminInfoByIDResponse": {
            "type": "object",
            "properties": {
                "admin": {
                    "$ref": "#/definitions/base.Admin"
                },
                "base": {
                    "$ref": "#/definitions/base.BaseResponse"
                },
                "user": {
                    "$ref": "#/definitions/base.User"
                }
            }
        },
        "user.GetCustomerInfoByIDResponse": {
            "type": "object",
            "properties": {
                "base": {
                    "$ref": "#/definitions/base.BaseResponse"
                },
                "customer": {
                    "$ref": "#/definitions/base.Customer"
                },
                "user": {
                    "$ref": "#/definitions/base.User"
                }
            }
        },
        "user.GetMerchantInfoByIDResponse": {
            "type": "object",
            "properties": {
                "base": {
                    "$ref": "#/definitions/base.BaseResponse"
                },
                "merchant": {
                    "$ref": "#/definitions/base.Merchant"
                },
                "user": {
                    "$ref": "#/definitions/base.User"
                }
            }
        },
        "user.GetUserInfoByIDResponse": {
            "type": "object",
            "properties": {
                "base": {
                    "$ref": "#/definitions/base.BaseResponse"
                },
                "user": {
                    "$ref": "#/definitions/base.User"
                }
            }
        },
        "user.ListUsersResponse": {
            "type": "object",
            "properties": {
                "base": {
                    "$ref": "#/definitions/base.BaseResponse"
                },
                "total_count": {
                    "type": "integer"
                },
                "users": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/base.User"
                    }
                }
            }
        },
        "user.LoginRequest": {
            "type": "object",
            "properties": {
                "email": {
                    "type": "string"
                },
                "password": {
                    "type": "string"
                }
            }
        },
        "user.LoginResponse": {
            "type": "object",
            "properties": {
                "base": {
                    "$ref": "#/definitions/base.BaseResponse"
                },
                "token": {
                    "type": "string"
                }
            }
        },
        "user.RegisterRequest": {
            "type": "object",
            "properties": {
                "address": {
                    "description": "可选的扩展字段，根据 role 决定",
                    "type": "string"
                },
                "email": {
                    "type": "string"
                },
                "level": {
                    "type": "integer"
                },
                "password": {
                    "type": "string"
                },
                "phone": {
                    "type": "string"
                },
                "role": {
                    "type": "string"
                },
                "shop_name": {
                    "type": "string"
                },
                "username": {
                    "type": "string"
                }
            }
        },
        "user.RegisterResponse": {
            "type": "object",
            "properties": {
                "base": {
                    "$ref": "#/definitions/base.BaseResponse"
                },
                "user_id": {
                    "type": "integer"
                }
            }
        },
        "user.UpdateAdminInfoByIDRequest": {
            "type": "object",
            "properties": {
                "level": {
                    "type": "integer"
                },
                "user_id": {
                    "type": "integer"
                }
            }
        },
        "user.UpdateAdminInfoByIDResponse": {
            "type": "object",
            "properties": {
                "base": {
                    "$ref": "#/definitions/base.BaseResponse"
                },
                "level": {
                    "type": "integer"
                }
            }
        },
        "user.UpdateCustomerInfoByIDRequest": {
            "type": "object",
            "properties": {
                "address": {
                    "type": "string"
                },
                "phone": {
                    "type": "string"
                },
                "user_id": {
                    "type": "integer"
                }
            }
        },
        "user.UpdateCustomerInfoByIDResponse": {
            "type": "object",
            "properties": {
                "base": {
                    "$ref": "#/definitions/base.BaseResponse"
                },
                "customer": {
                    "$ref": "#/definitions/base.Customer"
                }
            }
        },
        "user.UpdateMerchantInfoByIDRequest": {
            "type": "object",
            "properties": {
                "address": {
                    "type": "string"
                },
                "shop_name": {
                    "type": "string"
                },
                "user_id": {
                    "type": "integer"
                }
            }
        },
        "user.UpdateMerchantInfoByIDResponse": {
            "type": "object",
            "properties": {
                "base": {
                    "$ref": "#/definitions/base.BaseResponse"
                },
                "merchant": {
                    "$ref": "#/definitions/base.Merchant"
                }
            }
        },
        "user.UpdateUserRequest": {
            "type": "object",
            "properties": {
                "user": {
                    "$ref": "#/definitions/base.User"
                }
            }
        },
        "user.UpdateUserResponse": {
            "type": "object",
            "properties": {
                "base": {
                    "$ref": "#/definitions/base.BaseResponse"
                },
                "user": {
                    "$ref": "#/definitions/base.User"
                }
            }
        }
    }
}